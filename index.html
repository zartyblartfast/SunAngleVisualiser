<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <title>Sun Angles - Flat vs Spherical Earth</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-core.js"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-service.js"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-ui.js"></script>
  <script src="https://js.api.here.com/v3/3.1/mapsjs-mapevents.js"></script>
  <link rel="stylesheet" type="text/css" href="https://js.api.here.com/v3/3.1/mapsjs-ui.css" />
</head>
<body>
  <!-- Header section -->
  <header>
    <h1>Sun Angles Calculator</h1>
    <p>Calculate sun angles from any location on Earth</p>
  </header>

  <main>
    <!-- New Structure -->
    <div class="outer-wrapper">
        <div class="inner-wrapper">
            <div class="section-title">Inputs</div>
            <div class="section input-fields">
                <!-- Add input fields here -->
            </div>
            <div class="section latitude-finder">
                <!-- Add latitude finder here -->
            </div>
        </div>
        <div class="calculated-inputs">
            <div class="section-title">Calculated Inputs</div>
            <!-- Add calculated input content here -->
        </div>
    </div>
    <div class="content-wrapper">
        <!-- Inputs Section Wrapper -->
        <section class="inputs-wrapper-section">
            <h2>Inputs</h2>
            <div class="inputs-container">
                <!-- Left side: Input fields -->
                <section class="new-inputs-section">
                    <div>
                        <label for="location-latitude-input">Location Latitude:</label>
                        <input type="range" id="location-latitude-slider" min="-90" max="90" value="51.3" step="0.1">
                        <input type="number" id="location-latitude-input" min="-90" max="90" step="0.1" value="51.3" title="Input location latitude">
                        <span class="help-icon" data-help="Input the latitude of your location in degrees. Valid range is from -90° (South Pole) to 90° (North Pole).">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                    <div>
                        <label for="location-longitude-input">Location Longitude:</label>
                        <input type="range" id="location-longitude-slider" min="-180" max="180" value="0" step="0.1">
                        <input type="number" id="location-longitude-input" min="-180" max="180" step="0.1" value="0" title="Input location longitude">
                        <span class="help-icon" data-help="Input the longitude of your location in degrees. Valid range is from -180° (West) to 180° (East).">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                    <div>
                        <label for="selected-date">Date:</label>
                        <input type="date" id="selected-date" disabled>
                        <span class="help-icon" data-help="Select a date to calculate solar positions. The date affects the sun's declination and day length.">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                    <div>
                        <label for="solar-time">Solar Time:</label>
                        <input type="time" id="solar-time" disabled>
                        <span class="help-icon" data-help="Solar time based on the sun's position relative to your longitude. Solar noon is when the sun crosses your meridian.">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                    <div>
                        <label for="local-time">Local Standard Time:</label>
                        <span id="eot-display">EoT: 0:00</span>
                        <input type="time" id="local-time" disabled>
                        <span class="help-icon" data-help="Local time adjusted for your timezone offset from UTC. This is the time shown on clocks in your location.">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                    <div>
                        <label for="latitude-overhead-input">Solar Declination:</label>
                        <input type="range" id="latitude-overhead-slider" min="-23.5" max="23.5" value="0" step="0.1">
                        <input type="number" id="latitude-overhead-input" min="-23.5" max="23.5" step="0.1" value="0" title="Input latitude for sun directly overhead">
                        <span class="help-icon" data-help="Input the latitude in degrees at which the Sun is directly overhead. The Sun can be directly overhead anywhere in the Tropic Zone from 23.5° N to 23.5° S. The valid range is from -23.5° to 23.5°.">
                            <i class="fas fa-question-circle"></i>
                        </span>
                    </div>
                </section>
    
                <!-- Right side: Map and search -->
                <section class="map-section">
                    <div class="location-search-container">
                        <input type="text" id="location-search" placeholder="Enter location...">
                        <button id="search-button">Search</button>
                    </div>
                    <div id="map"></div>
                </section>
            </div>
        </section>
    
        <!-- Calculated Outputs Section -->
        <section class="calculated-outputs-section">
            <h2>Calculated Outputs</h2>
            <div class="outputs-container">
                <div>
                    <label for="solar-elevation-output">Solar Elevation/Altitude (degrees):</label>
                    <input type="number" id="solar-elevation-output" disabled value="0" step="0.1">
                    <span class="help-icon" data-help="The angle between the horizon (tangent line) and the sun's position in the sky. Positive values indicate the sun is above the horizon, negative values indicate the sun is below the horizon.">
                        <i class="fas fa-question-circle"></i>
                    </span>
                </div>
                <div>
                    <label for="solar-azimuth-output">Solar Azimuth (degrees):</label>
                    <input type="text" id="solar-azimuth-output" disabled>
                    <span class="help-icon" data-help="The horizontal angle of the sun measured clockwise from true North. 0° is North, 90° is East, 180° is South, and 270° is West.">
                        <i class="fas fa-question-circle"></i>
                    </span>
                </div>
                <div>
                    <label for="solar-zenith-output">Solar Zenith (degrees):</label>
                    <input type="text" id="solar-zenith-output" disabled>
                    <span class="help-icon" data-help="The angle between the sun and the vertical (zenith). 0° means the sun is directly overhead, 90° means the sun is at the horizon.">
                        <i class="fas fa-question-circle"></i>
                    </span>
                </div>
            </div>
        </section>
    </div>

    <!-- Table section (below both inputs and map) -->
    <section id="table-container"></section>

    <!-- SVG Diagram Section -->
    <section class="svg-diagram-section">
        <div id="solar-altitude-diagram"></div>
    </section>
    <section id="sun-path-container" style="width: 100%; height: 400px; margin-top: 20px;">
        <!-- Three.js will render here -->
    </section>
    <style>
        #sun-path-container {
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .cardinal-marker {
            color: #333;
            font-weight: bold;
            pointer-events: none;
        }
    </style>
  </main>

  <!-- Reference to the main.js file -->
  <script src="Equation_of_Time.js"></script>
  <script src="geocoding.js"></script>
  <script src="utilities.js" type="module"></script>
  <script src="main.js" type="module"></script>
  <script src="solar_altitude_diagram.js" type="module"></script>
</body>
</html>
